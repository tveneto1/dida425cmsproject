<!-- this is what the user sees after logging in, 
 the content itself can be changed and probably should
 could have hyperlinks leading to different functions
 ie create post, delete post, etc -->
{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

  /* Reset body margin */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  html {
    height: 100%;
  }

  body {
    min-height: 100vh;
    overflow-x: hidden;
    display: flex;
    flex-direction: column;
  }

  /* Header Styles */
  .header {
    background-color: #005A43;
    text-align: center;
    color: #f8f9fa;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 40px;
    padding: 30px;
    margin: 0;
  }

  .header h1 {
    margin: 0 0 10px 0;
  }

  .header h5 {
    margin: 10px 0 0 0;
    line-height: 1.4;
  }

  /* Account Bar Styles */
  .accountbar {
    background-color: #f0f0f0;
    padding: 15px 20px;
    font-size: 20px;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    color: #212529;
    margin: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  /* Main content wrapper */
  .main-content {
    flex: 1;
    padding-bottom: 60px;
  }

  /* Dropdown Menu Styles */
  .dropdown {
    display: flex;
    align-items: center;
    position: relative;
  }

  .dropdown-button {
    background-color: transparent;
    padding: 8px;
    font-size: 20px;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    color: #212529;
    outline: none;
    border: none;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    gap: 4px;
    width: 30px;
    transition: all 0.2s;
  }

  .hamburger-line {
    width: 30px;
    height: 3px;
    background-color: #212529;
    transition: background-color 0.2s;
    border-radius: 2px;
  }

  .dropdown-button:hover .hamburger-line {
    background-color: #005A43;
  }

  .menu {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 220px;
    box-shadow: 0px 4px 12px 0px rgba(0, 0, 0, 0.15);
    border-radius: 8px;
    z-index: 1000;
    right: 0;
    top: calc(100% + 8px);
    overflow: hidden;
    border: 1px solid #e0e0e0;
  }

  .menu.show {
    display: block;
  }

  .menu a {
    color: #212529;
    padding: 14px 20px;
    text-decoration: none;
    display: block;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 16px;
    transition: all 0.2s;
    border-bottom: 1px solid #f0f0f0;
  }

  .menu a:last-child {
    border-bottom: none;
  }

  .menu a:hover {
    background-color: #e8f5f1;
    color: #005A43;
  }

  /* Column Layout Styles */
  .row {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    text-align: center;
    padding: 40px 20px;
    max-width: 1400px;
    margin: 0 auto;
  }

  .row:after {
    content: "";
    display: table;
    clear: both;
  }

  .column {
    float: left;
    width: 33.333%;
    padding: 10px;
    height: 240px;
  }

  /* Card Styles */
  .card-link {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 25px 20px;
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    text-decoration: none;
    color: #212529;
    transition: all 0.2s;
    height: 100%;
    box-sizing: border-box;
  }

  .card-link:hover {
    background: #e8f5f1;
    border-color: #005A43;
  }

  .card-title {
    color: #005A43;
    font-weight: 600;
    font-size: 22px;
    margin: 0 0 15px 0;
    text-align: center;
  }

  .card-description {
    color: #6c757d;
    font-weight: 400;
    font-size: 14px;
    text-align: center;
    margin: 15px 0 0 0;
    line-height: 1.4;
  }

  .card-icon {
    padding: 10px;
    border-radius: 8px;
    stroke: #005A43;
    margin: 10px 0;
    width: 80px;
    height: 80px;
  }

  /* Footer Styles */
  .footer {
    background-color: #005A43;
    padding: 15px 20px;
    color: #f8f9fa;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    line-height: 0.5;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 0;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
  }

  /* Login Container Styles */
  .login-container {
    max-width: 400px;
    margin: 60px auto;
    padding: 40px;
    background: #f8f9fa;
    border-radius: 12px;
    text-align: center;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }

  .login-title {
    margin-bottom: 20px;
    color: #005A43;
    font-weight: 700;
  }

  .login-subtitle {
    color: #666;
    margin-bottom: 30px;
    font-weight: 400;
  }

  .button-group {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-bottom: 30px;
  }

  .btn-primary {
    padding: 12px 24px;
    background: #005A43;
    color: white;
    text-decoration: none;
    border-radius: 6px;
    transition: background 0.2s;
    font-weight: 600;
  }

  .btn-primary:hover {
    background: #004532;
  }

  .btn-secondary {
    padding: 12px 24px;
    background: white;
    border: 1px solid #dee2e6;
    color: #212529;
    text-decoration: none;
    border-radius: 6px;
    transition: all 0.2s;
    font-weight: 400;
  }

  .btn-secondary:hover {
    background: #f8f9fa;
  }
</style>

{% if user.is_authenticated %}
<!-- Authenticated User View -->
<div class="main-content">
  <div class="header">
    <h1>CMS425</h1>
    <h5 style="color: #e8f5f1;">Content Management System for Digital Signage and Announcements</h5>
  </div>

  <div class="accountbar">
    <p style="margin: 0;">
      Welcome back, {{ user.username }}!
    </p>
    <div class="dropdown">
      <button class="dropdown-button" onclick="toggleMenu(event)">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>
      <div class="menu" id="dropdownMenu">
        <a href="{% url 'password_reset' %}">Password Reset</a>
        {% if user.is_staff %}
          <a href="{% url 'manage_users' %}">Manage Users</a>
        {% endif %}
        <a href="{% url 'logout' %}">Log Out</a>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="column">
      <a href="{% url 'go_to_post' %}" class="card-link">
        <h3 class="card-title">Upload Content</h3>
        <svg class="card-icon" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="17 8 12 3 7 8"></polyline>
          <line x1="12" y1="3" x2="12" y2="15"></line>
        </svg>
        <p class="card-description">Add new announcements and content</p>
      </a>
    </div>

    <div class="column">
      <a href="{% url 'all_images' %}" class="card-link">
        <h3 class="card-title">Manage Slides</h3>
        <svg class="card-icon" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
          <circle cx="8.5" cy="8.5" r="1.5"></circle>
          <polyline points="21 15 16 10 5 21"></polyline>
        </svg>
        <p class="card-description">View and manage the content currently in the slideshow carousel rotation</p>
      </a>
    </div>

    <div class="column">
      <a href="{% url 'slidedisplay' %}" class="card-link">
        <h3 class="card-title">Start Display</h3>
        <svg class="card-icon" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="5 3 19 12 5 21 5 3"></polygon>
        </svg>
        <p class="card-description">Launch automatic slideshow presentation</p>
      </a>
    </div>
  </div>
</div>

<div class="footer">
  <a href="https://github.com/tveneto1/dida425cmsproject" target="_blank" style="color: #f8f9fa; text-decoration: none;">About CMS425</a>
  <p>© 2025</p>
</div>

<script>
  function toggleMenu(event) {
    event.stopPropagation();
    const menu = document.getElementById('dropdownMenu');
    menu.classList.toggle('show');
  }

  // Close menu when clicking outside
  document.addEventListener('click', function(event) {
    const menu = document.getElementById('dropdownMenu');
    const dropdown = event.target.closest('.dropdown');
    
    if (!dropdown && menu.classList.contains('show')) {
      menu.classList.remove('show');
    }
  });
</script>

{% else %}
<!-- Guest User View -->
<div class="main-content">
  <div class="login-container">
    <h2 class="login-title">Welcome!</h2>
    <p class="login-subtitle">Please log in to continue</p>
    
    <div class="button-group">
      <a href="{% url 'login' %}" class="btn-primary">Log In</a>
      <a href="{% url 'password_reset' %}" class="btn-secondary">Reset Password</a>
    </div>

    <p class="login-subtitle">Or start display here:</p>
    <a href="{% url 'slidedisplay' %}" class="btn-primary">Start Display</a>
  </div>
</div>

<div class="footer">
  <a href="https://github.com/tveneto1/dida425cmsproject" target="_blank" style="color: #f8f9fa; text-decoration: none;">About CMS425</a>
  <p>© 2025</p>
</div>
{% endif %}
{% endblock %}
